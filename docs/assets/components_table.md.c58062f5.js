import{o as n,c as a,a as s}from"./app.04752255.js";const t='{"title":"BasicTable 表格组件","description":"","frontmatter":{},"headers":[{"level":2,"title":"基础使用","slug":"基础使用"},{"level":2,"title":"编辑单元格","slug":"编辑单元格"},{"level":2,"title":"编辑整行","slug":"编辑整行"},{"level":2,"title":"支持编辑组件","slug":"支持编辑组件"},{"level":2,"title":"Props","slug":"props"},{"level":2,"title":"column","slug":"column"},{"level":3,"title":"tableAction","slug":"tableaction"},{"level":3,"title":"tableAction.actions","slug":"tableaction-actions"},{"level":2,"title":"事件","slug":"事件"},{"level":2,"title":"Slots","slug":"slots"}],"relativePath":"components/table.md","lastUpdated":1628062036499}',p={},o=s('<h1 id="basictable-表格组件"><a class="header-anchor" href="#basictable-表格组件" aria-hidden="true">#</a> BasicTable 表格组件</h1><p>对 <code>Data Table</code> 组件进行封装</p><blockquote><p>如果文档内没有，可以尝试在在线示例内寻找</p></blockquote><h2 id="基础使用"><a class="header-anchor" href="#基础使用" aria-hidden="true">#</a> 基础使用</h2><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-card</span> <span class="token attr-name">:bordered</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>proCard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BasicTable</span>\n            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>表格列表<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">titleTooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>这是一个提示<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">:columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">:request</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadDataTable<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(row) =&gt; row.id<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionRef<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name">:actionColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionColumn<span class="token punctuation">&quot;</span></span>\n            <span class="token attr-name"><span class="token namespace">@update:</span>checked-row-keys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCheckedRow<span class="token punctuation">&quot;</span></span>\n        <span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#toolbar</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reloadTable<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>刷新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-button</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BasicTable</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-card</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> BasicTable<span class="token punctuation">,</span> TableAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components/Table&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> getTableList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/table/list&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> columns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./basicColumns&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useDialog<span class="token punctuation">,</span> useMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;naive-ui&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    components<span class="token operator">:</span> <span class="token punctuation">{</span> BasicTable <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">useMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">const</span> dialog <span class="token operator">=</span> <span class="token function">useDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">const</span> actionRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            params<span class="token operator">:</span> <span class="token punctuation">{</span>\n                pageSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n                name<span class="token operator">:</span> <span class="token string">&#39;xiaoMa&#39;</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            actionColumn<span class="token operator">:</span> <span class="token punctuation">{</span>\n                width<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>\n                title<span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span>\n                dataIndex<span class="token operator">:</span> <span class="token string">&#39;action&#39;</span><span class="token punctuation">,</span>\n                fixed<span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span>\n                align<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>\n                <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>TableAction<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n                        style<span class="token operator">:</span> <span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span>\n                        actions<span class="token operator">:</span> <span class="token function">createActions</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">function</span> <span class="token function">createActions</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token punctuation">[</span>\n                <span class="token punctuation">{</span>\n                    label<span class="token operator">:</span> <span class="token string">&#39;删除&#39;</span><span class="token punctuation">,</span>\n                    icon<span class="token operator">:</span> <span class="token string">&#39;ic:outline-delete-outline&#39;</span><span class="token punctuation">,</span>\n                    onClick<span class="token operator">:</span> <span class="token function">handleDelete</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token comment">// 根据业务控制是否显示 isShow 和 auth 是并且关系</span>\n                    <span class="token function-variable function">ifShow</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n                        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n                    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                    <span class="token comment">// 根据权限控制是否显示: 有权限，会显示，支持多个</span>\n                    auth<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;basic_list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">{</span>\n                    label<span class="token operator">:</span> <span class="token string">&#39;编辑&#39;</span><span class="token punctuation">,</span>\n                    onClick<span class="token operator">:</span> <span class="token function">handleEdit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n                    <span class="token function-variable function">ifShow</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n                        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n                    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                    auth<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;basic_list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">const</span> <span class="token function-variable function">loadDataTable</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTableList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">return</span> data<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">function</span> <span class="token function">onCheckedRow</span><span class="token punctuation">(</span><span class="token parameter">rowKeys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rowKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">function</span> <span class="token function">reloadTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            actionRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">function</span> <span class="token function">handleDelete</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            dialog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n                title<span class="token operator">:</span> <span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>\n                content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">您想删除</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>record<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n                positiveText<span class="token operator">:</span> <span class="token string">&#39;确定&#39;</span><span class="token punctuation">,</span>\n                negativeText<span class="token operator">:</span> <span class="token string">&#39;取消&#39;</span><span class="token punctuation">,</span>\n                <span class="token function-variable function">onPositiveClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n                    message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;删除成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token function-variable function">onNegativeClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">function</span> <span class="token function">handleEdit</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;您点击了编辑按钮&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            columns<span class="token punctuation">,</span>\n            actionRef<span class="token punctuation">,</span>\n            loadDataTable<span class="token punctuation">,</span>\n            onCheckedRow<span class="token punctuation">,</span>\n            reloadTable<span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h2 id="编辑单元格"><a class="header-anchor" href="#编辑单元格" aria-hidden="true">#</a> 编辑单元格</h2><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-card</span> <span class="token attr-name">:bordered</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>proCard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BasicTable</span>\n      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>表格列表<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">titleTooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>这是一个提示<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:request</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadDataTable<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(row) =&gt; row.id<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionRef<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:actionColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionColumn<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">@edit-end</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editEnd<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">@edit-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEditChange<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name"><span class="token namespace">@update:</span>checked-row-keys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCheckedRow<span class="token punctuation">&quot;</span></span>\n    <span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#toolbar</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reloadTable<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>刷新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-button</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BasicTable</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-card</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> BasicTable<span class="token punctuation">,</span> TableAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components/Table&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> getTableList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/table/list&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> columns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./CellColumns&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    components<span class="token operator">:</span> <span class="token punctuation">{</span> BasicTable <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> actionRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> currentEditKeyRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        params<span class="token operator">:</span> <span class="token punctuation">{</span>\n          pageSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n          name<span class="token operator">:</span> <span class="token string">&#39;xiaoMa&#39;</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        actionColumn<span class="token operator">:</span> <span class="token punctuation">{</span>\n          width<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>\n          title<span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span>\n          dataIndex<span class="token operator">:</span> <span class="token string">&#39;action&#39;</span><span class="token punctuation">,</span>\n          fixed<span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span>\n          align<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>\n          <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>TableAction<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n              style<span class="token operator">:</span> <span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span>\n              actions<span class="token operator">:</span> <span class="token function">createActions</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token keyword">function</span> <span class="token function">handleEdit</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> record<span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n        record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">handleCancel</span><span class="token punctuation">(</span><span class="token parameter">record<span class="token operator">:</span> EditRecordRow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>\n        record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">onEditChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> column<span class="token punctuation">,</span> value<span class="token punctuation">,</span> record <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span>dataIndex <span class="token operator">===</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          record<span class="token punctuation">.</span>editValueRefs<span class="token punctuation">.</span>name4<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>column<span class="token punctuation">,</span> value<span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token parameter">record<span class="token operator">:</span> EditRecordRow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> pass <span class="token operator">=</span> <span class="token keyword">await</span> record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">createActions</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>record<span class="token punctuation">.</span>editable<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;编辑&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleEdit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;保存&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleSave</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;取消&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleCancel</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">const</span> <span class="token function-variable function">loadDataTable</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTableList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> data<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n      <span class="token keyword">function</span> <span class="token function">onCheckedRow</span><span class="token punctuation">(</span><span class="token parameter">rowKeys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rowKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">reloadTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>actionRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        actionRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">editEnd</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> record<span class="token punctuation">,</span> index<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        columns<span class="token punctuation">,</span>\n        actionRef<span class="token punctuation">,</span>\n        loadDataTable<span class="token punctuation">,</span>\n        onCheckedRow<span class="token punctuation">,</span>\n        reloadTable<span class="token punctuation">,</span>\n        editEnd<span class="token punctuation">,</span>\n        onEditChange<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h2 id="编辑整行"><a class="header-anchor" href="#编辑整行" aria-hidden="true">#</a> 编辑整行</h2><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-card</span> <span class="token attr-name">:bordered</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>proCard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BasicTable</span>\n      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>表格列表<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">titleTooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>这是一个提示<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:request</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadDataTable<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(row) =&gt; row.id<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionRef<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:actionColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actionColumn<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">@edit-end</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editEnd<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">@edit-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEditChange<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name"><span class="token namespace">@update:</span>checked-row-keys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCheckedRow<span class="token punctuation">&quot;</span></span>\n    <span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#toolbar</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reloadTable<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>刷新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-button</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BasicTable</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-card</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> BasicTable<span class="token punctuation">,</span> TableAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components/Table&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> getTableList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/table/list&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">import</span> <span class="token punctuation">{</span> columns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./rowColumns&#39;</span><span class="token punctuation">;</span>\n  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    components<span class="token operator">:</span> <span class="token punctuation">{</span> BasicTable <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> actionRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> currentEditKeyRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        params<span class="token operator">:</span> <span class="token punctuation">{</span>\n          pageSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n          name<span class="token operator">:</span> <span class="token string">&#39;xiaoMa&#39;</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        actionColumn<span class="token operator">:</span> <span class="token punctuation">{</span>\n          width<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>\n          title<span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span>\n          key<span class="token operator">:</span> <span class="token string">&#39;action&#39;</span><span class="token punctuation">,</span>\n          fixed<span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span>\n          align<span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>\n          <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>TableAction<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n              style<span class="token operator">:</span> <span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span>\n              actions<span class="token operator">:</span> <span class="token function">createActions</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token keyword">function</span> <span class="token function">handleEdit</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> record<span class="token punctuation">.</span>key<span class="token punctuation">;</span>\n        record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">handleCancel</span><span class="token punctuation">(</span><span class="token parameter">record<span class="token operator">:</span> EditRecordRow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>\n        record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">onEditChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> column<span class="token punctuation">,</span> value<span class="token punctuation">,</span> record <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span>dataIndex <span class="token operator">===</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          record<span class="token punctuation">.</span>editValueRefs<span class="token punctuation">.</span>name4<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>column<span class="token punctuation">,</span> value<span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token parameter">record<span class="token operator">:</span> EditRecordRow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> pass <span class="token operator">=</span> <span class="token keyword">await</span> record<span class="token punctuation">.</span>onEdit<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          currentEditKeyRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">createActions</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>record<span class="token punctuation">.</span>editable<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;编辑&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleEdit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;保存&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleSave</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              label<span class="token operator">:</span> <span class="token string">&#39;取消&#39;</span><span class="token punctuation">,</span>\n              onClick<span class="token operator">:</span> <span class="token function">handleCancel</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">const</span> <span class="token function-variable function">loadDataTable</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTableList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> data<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n      <span class="token keyword">function</span> <span class="token function">onCheckedRow</span><span class="token punctuation">(</span><span class="token parameter">rowKeys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rowKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">function</span> <span class="token function">reloadTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>actionRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        actionRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      \n      <span class="token keyword">function</span> <span class="token function">editEnd</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> record<span class="token punctuation">,</span> index<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      \n      <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        columns<span class="token punctuation">,</span>\n        actionRef<span class="token punctuation">,</span>\n        loadDataTable<span class="token punctuation">,</span>\n        onCheckedRow<span class="token punctuation">,</span>\n        reloadTable<span class="token punctuation">,</span>\n        editEnd<span class="token punctuation">,</span>\n        onEditChange<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h2 id="支持编辑组件"><a class="header-anchor" href="#支持编辑组件" aria-hidden="true">#</a> 支持编辑组件</h2><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span>\n    NInput<span class="token punctuation">,</span>\n    NSelect<span class="token punctuation">,</span>\n    NCheckbox<span class="token punctuation">,</span>\n    NInputNumber<span class="token punctuation">,</span>\n    NSwitch<span class="token punctuation">,</span>\n    NDatePicker<span class="token punctuation">,</span>\n    NTimePicker<span class="token punctuation">,</span>\n<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;naive-ui&#39;</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="props"><a class="header-anchor" href="#props" aria-hidden="true">#</a> Props</h2><div class="tip custom-block"><p class="custom-block-title">温馨提醒</p><ul><li>除以下参数外，官方文档内的 props 也都支持，具体可以参考 <a href="https://www.naiveui.com/zh-CN/os-theme/components/data-table" target="_blank" rel="noopener noreferrer">Data Table</a></li></ul></div><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>可选值</th><th>说明</th><th>版本</th></tr></thead><tbody><tr><td>title</td><td><code>string</code></td><td><code>null</code></td><td>-</td><td>表格标题</td><td></td></tr><tr><td>titleTooltip</td><td><code>string</code></td><td><code>null</code></td><td>-</td><td>表格标题右侧温馨提醒</td><td></td></tr><tr><td>tableData</td><td><code>any[]</code></td><td><code>-</code></td><td>-</td><td>表格数据</td><td></td></tr><tr><td>request</td><td><code>function</code></td><td><code>-</code></td><td>-</td><td>请求接口，如数据不需要二次处理，可以直接将src/api内的函数直接传入</td><td></td></tr><tr><td>pagination</td><td><code>any</code></td><td>-</td><td>-</td><td>分页信息配置，为 <code>false</code> 不显示分页</td><td></td></tr><tr><td>canResize</td><td><code>boolean</code></td><td><code>true</code></td><td>-</td><td>是否可以自适应高度</td><td></td></tr><tr><td>resizeHeightOffset</td><td><code>number</code></td><td>0</td><td>-</td><td>表格自适应高度计算结果会减去这个值</td><td></td></tr><tr><td>actionColumn</td><td><code>object</code></td><td><code>-</code></td><td>-</td><td>操作列按钮，用<code>render</code> 配合<code>TableAction</code>实现，参考以上基础表格示例</td><td></td></tr></tbody></table><h2 id="column"><a class="header-anchor" href="#column" aria-hidden="true">#</a> column</h2><p>除 参考官方 <a href="https://www.naiveui.com/zh-CN/os-theme/components/data-table" target="_blank" rel="noopener noreferrer">Column 配置</a>外，扩展以下参数</p><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>可选值</th><th>说明</th></tr></thead><tbody><tr><td>helpMessage</td><td><code>string｜string[]</code></td><td>-</td><td>-</td><td>列头右侧帮助文本</td></tr><tr><td>edit</td><td><code>boolean</code></td><td>-</td><td>-</td><td>是否开启单元格编辑</td></tr><tr><td>editRow</td><td><code>boolean</code></td><td>-</td><td>-</td><td>是否开启行编辑</td></tr><tr><td>editable</td><td><code>boolean</code></td><td>false</td><td>-</td><td>是否处于编辑状态</td></tr><tr><td>editComponent</td><td><code>ComponentType</code></td><td><code>Input</code></td><td>-</td><td>编辑组件</td></tr><tr><td>editComponentProps</td><td><code>any</code></td><td>-</td><td>-</td><td>对应编辑组件的 props</td></tr><tr><td>editRule</td><td><code>((text: string, record: Recordable) =&gt; Promise&lt;string&gt;)</code></td><td>-</td><td>-</td><td>对应编辑组件的表单校验</td></tr><tr><td>editValueMap</td><td><code>(value: any) =&gt; string</code></td><td>-</td><td>-</td><td>对应单元格值枚举</td></tr><tr><td>onEditRow</td><td><code>（）=&gt;void</code></td><td>-</td><td>-</td><td>触发行编辑</td></tr><tr><td>auth</td><td><code>RoleEnum</code> ｜ <code>RoleEnum[]</code> ｜ <code>string</code> ｜ <code>string[]</code></td><td>-</td><td>-</td><td>根据权限编码来控制当前列是否显示</td></tr><tr><td>ifShow</td><td><code>boolean ｜ ((action: ActionItem) =&gt; boolean)</code></td><td>-</td><td>-</td><td>根据业务状态来控制当前列是否显示</td></tr></tbody></table><h3 id="tableaction"><a class="header-anchor" href="#tableaction" aria-hidden="true">#</a> tableAction</h3><div class="language-ts"><pre><code><span class="token punctuation">{</span>\n  <span class="token comment">// 按钮列表</span>\n  actions<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">;</span>\n  <span class="token comment">// 按钮风格 可选 `button`, `text`</span>\n  style<span class="token operator">?</span><span class="token operator">:</span> String<span class="token punctuation">;</span>\n  <span class="token comment">// 更多按钮列表</span>\n  dropDownActions<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">;</span>\n  <span class="token comment">// 更多按钮选择之后回调事件</span>\n  select<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h3 id="tableaction-actions"><a class="header-anchor" href="#tableaction-actions" aria-hidden="true">#</a> tableAction.actions</h3><div class="language-ts"><pre><code><span class="token punctuation">{</span>\n    <span class="token comment">//按钮点击</span>\n    onClick<span class="token operator">?</span><span class="token operator">:</span> Fn<span class="token punctuation">;</span>\n    <span class="token comment">//按钮文字</span>\n    label<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    <span class="token comment">//主题</span>\n    color<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&#39;success&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;error&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;warning&#39;</span><span class="token punctuation">;</span>\n    <span class="token comment">//图标，暂未实现</span>\n    icon<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    <span class="token comment">//禁用</span>\n    disabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n    <span class="token comment">// 权限编码控制是否显示</span>\n    auth<span class="token operator">?</span><span class="token operator">:</span> RoleEnum <span class="token operator">|</span> RoleEnum<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// 业务控制是否显示</span>\n    ifShow<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>action<span class="token operator">:</span> ActionItem<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="事件"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><div class="tip custom-block"><p class="custom-block-title">温馨提醒</p><p>除以下事件外，官方文档内的 event 也都支持，具体可以参考 <a href="https://www.naiveui.com/zh-CN/os-theme/components/data-table" target="_blank" rel="noopener noreferrer">Data Table</a></p></div><table><thead><tr><th>事件</th><th>回调参数</th><th>说明</th></tr></thead><tbody><tr><td>fetch-success</td><td><code>Function({items,total})</code></td><td>接口请求成功后触发</td></tr><tr><td>fetch-error</td><td><code>Function(error)</code></td><td>错误信息</td></tr><tr><td>selection-change</td><td><code>Function({keys，rows})</code></td><td>勾选事件触发</td></tr><tr><td>edit-end</td><td><code>Function({record, index, key, value})</code></td><td>单元格编辑完成触发</td></tr><tr><td>edit-cancel</td><td><code>Function({record, index, key, value})</code></td><td>单元格取消编辑触发</td></tr><tr><td>edit-row-end</td><td><code>Function()</code></td><td>行编辑结束触发</td></tr><tr><td>edit-change</td><td><code>Function({column,value,record})</code></td><td>单元格编辑组件的 value 发生变化时触发</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">edit-change 说明</p><p>对于 <code>edit-change</code> 事件，<code>record</code> 中的 <code>editValueRefs</code> 装载了当前行的所有编辑组件（如果有的话）的值的 <code>ref</code> 对象，可用于处理同一行中的编辑组件的联动。请看下面的例子</p></div><div class="language-javascript"><pre><code>      <span class="token keyword">function</span> <span class="token function">onEditChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> column<span class="token punctuation">,</span> record <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 当同一行的单价或者数量发生变化时，更新合计金额（三个数据均为当前行编辑组件的值）</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span>dataIndex <span class="token operator">===</span> <span class="token string">&#39;qty&#39;</span> <span class="token operator">||</span> column<span class="token punctuation">.</span>dataIndex <span class="token operator">===</span> <span class="token string">&#39;price&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> <span class="token punctuation">{</span> editValueRefs<span class="token operator">:</span> <span class="token punctuation">{</span> total<span class="token punctuation">,</span> qty<span class="token punctuation">,</span> price <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> record<span class="token punctuation">;</span>\n          total<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">unref</span><span class="token punctuation">(</span>qty<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">unref</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n</code></pre></div><h2 id="slots"><a class="header-anchor" href="#slots" aria-hidden="true">#</a> Slots</h2><div class="tip custom-block"><p class="custom-block-title">温馨提醒</p><p>除以下参数外，官方文档内的 slot 也都支持，<a href="https://www.naiveui.com/zh-CN/os-theme/components/data-table" target="_blank" rel="noopener noreferrer">Data Table</a></p></div><table><thead><tr><th>名称</th><th>说明</th><th>版本</th></tr></thead><tbody><tr><td>tableTitle</td><td>表格顶部左侧区域</td><td></td></tr><tr><td>toolbar</td><td>表格顶部右侧区域</td><td></td></tr></tbody></table>',29);p.render=function(s,t,p,c,e,u){return n(),a("div",null,[o])};export default p;export{t as __pageData};
