var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(o,t,l)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,r=(e,o)=>{for(var t in o||(o={}))n.call(o,t)&&s(e,t,o[t]);if(l)for(var t of l(o))a.call(o,t)&&s(e,t,o[t]);return e},i=(e,l)=>o(e,t(l)),u=(e,o,t)=>new Promise(((l,n)=>{var a=e=>{try{r(t.next(e))}catch(o){n(o)}},s=e=>{try{r(t.throw(e))}catch(o){n(o)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,s);r((t=t.apply(e,o)).next())}));import{b1 as d,d as c,f as p,j as f,k as m,x as b,i as g,bs as h,bC as M,V as y,o as v,c as P,bA as k,a3 as w,b as R,bg as C,t as O,a4 as S,bv as _,h as B,bn as I,Z as L}from"./vendor.c1e6e6e7.js";import{k as j,l as x,m as V}from"./index.73fa6b69.js";import{_ as N}from"./BasicForm.7095d3d0.js";import{u as U}from"./useForm.c86c0d55.js";import"./propTypes.34968b9b.js";const F=i(r({},d.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),D=function(e,o){return e.currentStyle?e.currentStyle[o]:document.defaultView.getComputedStyle(e,!1)[o]},T={left:0,top:0,currentX:0,currentY:0,flag:!1};var E=c({name:"BasicModal",components:{},props:r({},F),emits:["on-close","on-ok","register"],setup(e,{emit:o,attrs:t}){const l=p({}),n=f({isModal:!1,subLoading:!1}),a=m((()=>{const o=r(r({},e),b(l));return r({},o)}));function s(e){return u(this,null,(function*(){l.value=j(b(l)||{},e)}))}const d=m((()=>r(r({},t),b(a))));function c(){n.isModal=!0,h((()=>{const e=document.getElementById("basic-modal");!function(e,o,t){const l=document.body.clientWidth,n=document.documentElement.clientHeight,a=o.offsetWidth,s=o.offsetHeight,r=o.offsetLeft,i=o.offsetTop,u=l-r-a,d=n-i-s;"auto"!==D(o,"left")&&(T.left=D(o,"left")),"auto"!==D(o,"top")&&(T.top=D(o,"top")),e.onmousedown=function(o){T.flag=!0,o||(o=window.event,e.onselectstart=function(){return!1});const t=o;T.currentX=t.clientX,T.currentY=t.clientY},document.onmouseup=function(){T.flag=!1,"auto"!==D(o,"left")&&(T.left=D(o,"left")),"auto"!==D(o,"top")&&(T.top=D(o,"top"))},document.onmousemove=function(e){const l=e||window.event;if(T.flag){const n=l.clientX,a=l.clientY,s=n-T.currentX,c=a-T.currentY;let p=parseInt(T.left)+s,f=parseInt(T.top)+c;return-p>r?p=-r:p>u&&(p=u),-f>i?f=-i:f>d&&(f=d),o.style.left=p+"px",o.style.top=f+"px","function"==typeof t&&t((parseInt(T.left)||0)+s,(parseInt(T.top)||0)+c),e.preventDefault&&e.preventDefault(),!1}}}(document.getElementById("basic-modal-bar"),e)}))}function y(){n.isModal=!1,n.subLoading=!1,o("on-close")}const v={setProps:s,openModal:c,closeModal:y,setSubLoading:function(e){n.subLoading=e}};return M()&&o("register",v),i(r({},g(n)),{getBindValue:d,openModal:c,closeModal:y,onCloseModal:function(){n.isModal=!1,o("on-close")},handleSubmit:function(){n.subLoading=!0,o("on-ok")},setProps:s})}});const X={class:"w-full cursor-move",id:"basic-modal-bar"},Y=C("取消");function W(e){const o=p(null),t=p(!1);const l=()=>{const e=b(o);return e||error("useModal instance is undefined!"),e};return[function(l){if(!M())throw new Error("useModal() can only be used inside setup() or functional components!");B((()=>{o.value=null,t.value=!1})),b(t)&&x()&&l===b(o)||(o.value=l,I((()=>e),(()=>{const{setProps:t}=o.value;e&&t(V(e))}),{immediate:!0,deep:!0}))},{setProps:e=>{var o;null==(o=l())||o.setProps(e)},openModal:()=>{var e;null==(e=l())||e.openModal()},closeModal:()=>{var e;null==(e=l())||e.closeModal()},setSubLoading:()=>{var e;null==(e=l())||e.setSubLoading()}}]}E.render=function(e,o,t,l,n,a){const s=y("n-button"),r=y("n-space"),i=y("n-modal");return v(),P(i,_({id:"basic-modal"},e.getBindValue,{show:e.isModal,"onUpdate:show":o[1]||(o[1]=o=>e.isModal=o),onClose:e.onCloseModal}),k({header:w((()=>[R("div",X,O(e.getBindValue.title),1)])),default:w((()=>[S(e.$slots,"default")])),_:2},[e.$slots.action?{name:"action",fn:w((()=>[S(e.$slots,"action")]))}:{name:"action",fn:w((()=>[R(r,null,{default:w((()=>[R(s,{onClick:e.closeModal},{default:w((()=>[Y])),_:1},8,["onClick"]),R(s,{type:"primary",loading:e.subLoading,onClick:e.handleSubmit},{default:w((()=>[C(O(e.subBtuText),1)])),_:1},8,["loading","onClick"])])),_:1})]))}]),1040,["show","onClose"])};const $=[{field:"name",component:"NInput",label:"姓名",labelMessage:"这是一个提示",giProps:{span:1},componentProps:{placeholder:"请输入姓名",onInput:e=>{}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:e=>{}}},{field:"type",component:"NSelect",label:"类型",giProps:{},componentProps:{placeholder:"请选择类型",options:[{label:"舒适性",value:1},{label:"经济性",value:2}],onUpdateValue:e=>{}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",giProps:{},componentProps:{type:"date",clearable:!0,defaultValue:118313526e4,onUpdateValue:e=>{}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",giProps:{},componentProps:{clearable:!0,onUpdateValue:e=>{}}},{field:"makeProject",component:"NCheckbox",label:"预约项目",giProps:{},componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:e=>{}}},{field:"makeSource",component:"NRadioGroup",label:"来源",giProps:{},componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:e=>{}}},{field:"status",label:"状态",giProps:{},slot:"statusSlot"}];var A=c({components:{basicModal:E,BasicForm:N},setup(){const e=p(null),o=L(),[t,{openModal:l,closeModal:n,setSubLoading:a}]=W({title:"新增预约"}),[s,{openModal:d,closeModal:c,setSubLoading:m}]=W({title:"确认对话框",showIcon:!0,type:"warning",closable:!1,maskClosable:!0}),[b,{submit:h}]=U({gridProps:{cols:1},collapsedRows:3,labelWidth:120,layout:"horizontal",submitButtonText:"提交预约",showActionButtonGroup:!1,schemas:$}),M=f({formValue:{name:"小马哥"}});return i(r({},g(M)),{modalRef:e,register:b,modalRegister:t,lightModalRegister:s,handleReset:function(e){},showModal:function(){l()},okModal:function(){return u(this,null,(function*(){(yield h())?(n(),o.success("提交成功")):(o.error("验证失败，请填写完整信息"),a(!1))}))},lightOkModal:function(){c(),m()},showLightModal:function(){d()}})}});const G={class:"n-layout-page-header"},H=C(" 模态框，用于向用户收集或展示信息，Modal 采用 Dialog 预设，扩展拖拽效果 "),q=R("br",null,null,-1),z=C(" 以下是 useModal 方式，ref方式，也支持，使用方式和其他组件一致，如：modalRef.value.closeModal() "),Z=C(" 使用 useModal 进行弹窗展示和操作，并演示了在Modal内和Form组件，组合使用方法 "),J=C("打开Modal嵌套Form例子"),K=C(" 使用 useModal 进行弹窗展示和操作，自定义配置，实现轻量级效果，更多配置，请参考文档 "),Q=C("轻量级确认"),ee=C(" 组件暴露了，setProps 方法，用于修改组件内部 Props，比如标题，等，具体参考UI框架文档，DialogReactive Properties "),oe=R("p",{class:"text-gray-500",style:{"padding-left":"35px"}},"一些对话框内容",-1);A.render=function(e,o,t,l,n,a){const s=y("n-card"),r=y("n-alert"),i=y("n-divider"),u=y("n-button"),d=y("n-space"),c=y("n-input"),p=y("BasicForm"),f=y("basicModal");return v(),P("div",null,[R("div",G,[R(s,{bordered:!1,title:"模态框"},{default:w((()=>[H,q,z])),_:1})]),R(s,{bordered:!1,class:"proCard mt-4"},{default:w((()=>[R(r,{title:"Modal嵌套Form",type:"info"},{default:w((()=>[Z])),_:1}),R(i),R(d,null,{default:w((()=>[R(u,{type:"primary",onClick:e.showModal},{default:w((()=>[J])),_:1},8,["onClick"])])),_:1}),R(i),R(r,{title:"个性化轻量级",type:"info"},{default:w((()=>[K])),_:1}),R(i),R(d,null,{default:w((()=>[R(u,{type:"primary",onClick:e.showLightModal},{default:w((()=>[Q])),_:1},8,["onClick"])])),_:1}),R(i),R(r,{title:"提示",type:"info"},{default:w((()=>[ee])),_:1})])),_:1}),R(f,{onRegister:e.modalRegister,ref:"modalRef",class:"basicModal",onOnOk:e.okModal},{default:w((()=>[R(p,{onRegister:e.register,onReset:e.handleReset,class:"basicForm"},{statusSlot:w((({model:e,field:o})=>[R(c,{value:e[o],"onUpdate:value":t=>e[o]=t},null,8,["value","onUpdate:value"])])),_:1},8,["onRegister","onReset"])])),_:1},8,["onRegister","onOnOk"]),R(f,{onRegister:e.lightModalRegister,class:"basicModalLight",ref:"modalRef",onOnOk:e.lightOkModal},{default:w((()=>[oe])),_:1},8,["onRegister","onOnOk"])])};export default A;
