var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&o(e,t,a[t]);return e},u=(e,l)=>a(e,t(l));import{h as d,j as i}from"./index.98c7fc5c.js";import{d as p,bU as f,Z as m,f as c,j as h,i as b,V as y,o as v,c as g,$ as _,b as P,t as w,bf as x,bt as k,bV as O,bW as D,bX as T,k as K,g as U,y as j,X as C}from"./vendor.af0afcfa.js";const I={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}};var S=p({name:"CreateDrawer",props:{title:{type:String,default:"添加顶级菜单"},width:{type:Number,default:450}},components:{CheckOutlined:f},setup(e,{emit:a}){const t=m(),l=c(null),r=h({isDrawer:!1,subLoading:!1,formParams:{label:"",type:1,subtitle:"",openType:1,auth:"",path:"",hidden:!1},placement:"right",alertText:"该功能主要实时预览各种布局效果，更多完整配置在 projectSetting.ts 中设置，建议在生产环境关闭该布局预览功能。"});function n(){r.isDrawer=!1}function o(){l.value.restoreValidation(),r.formParams=Object.assign(r.formParams,{label:"",type:1,subtitle:"",openType:1,auth:"",path:"",hidden:!1})}return u(s({},b(r)),{formRef:l,rules:I,formSubmit:function(){l.value.validate((e=>{e?t.error("请填写完整信息"):(t.success("添加成功"),o(),n())}))},handleReset:o,openDrawer:function(e){r.isDrawer=!0},closeDrawer:n})}});const R=x("当前窗口"),M=x("新窗口"),z=x("提交"),E=x("重置");S.render=function(e,a,t,l,r,n){const o=y("n-form-item"),s=y("n-input"),u=y("n-radio"),d=y("n-space"),i=y("n-radio-group"),p=y("n-switch"),f=y("n-form"),m=y("n-button"),c=y("n-drawer-content"),h=y("n-drawer");return v(),g(h,{show:e.isDrawer,"onUpdate:show":a[7]||(a[7]=a=>e.isDrawer=a),width:e.width,placement:e.placement},{default:_((()=>[P(c,{title:e.title,closable:""},{footer:_((()=>[P(d,null,{default:_((()=>[P(m,{type:"primary",loading:e.subLoading,onClick:e.formSubmit},{default:_((()=>[z])),_:1},8,["loading","onClick"]),P(m,{onClick:e.handleReset},{default:_((()=>[E])),_:1},8,["onClick"])])),_:1})])),default:_((()=>[P(f,{model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":100},{default:_((()=>[P(o,{label:"类型",path:"type"},{default:_((()=>[P("span",null,w(1===e.formParams.type?"侧边栏菜单":""),1)])),_:1}),P(o,{label:"标题",path:"label"},{default:_((()=>[P(s,{placeholder:"请输入标题",value:e.formParams.label,"onUpdate:value":a[1]||(a[1]=a=>e.formParams.label=a)},null,8,["value"])])),_:1}),P(o,{label:"副标题",path:"subtitle"},{default:_((()=>[P(s,{placeholder:"请输入副标题",value:e.formParams.subtitle,"onUpdate:value":a[2]||(a[2]=a=>e.formParams.subtitle=a)},null,8,["value"])])),_:1}),P(o,{label:"路径",path:"path"},{default:_((()=>[P(s,{placeholder:"请输入路径",value:e.formParams.path,"onUpdate:value":a[3]||(a[3]=a=>e.formParams.path=a)},null,8,["value"])])),_:1}),P(o,{label:"打开方式",path:"openType"},{default:_((()=>[P(i,{value:e.formParams.openType,"onUpdate:value":a[4]||(a[4]=a=>e.formParams.openType=a),name:"openType"},{default:_((()=>[P(d,null,{default:_((()=>[P(u,{value:1},{default:_((()=>[R])),_:1}),P(u,{value:2},{default:_((()=>[M])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),P(o,{label:"菜单权限",path:"auth"},{default:_((()=>[P(s,{placeholder:"请输入权限，多个权限用，分割",value:e.formParams.auth,"onUpdate:value":a[5]||(a[5]=a=>e.formParams.auth=a)},null,8,["value"])])),_:1}),P(o,{label:"隐藏侧边栏",path:"hidden"},{default:_((()=>[P(p,{value:e.formParams.hidden,"onUpdate:value":a[6]||(a[6]=a=>e.formParams.hidden=a)},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title"])])),_:1},8,["show","width","placement"])};const L={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}};var q=p({components:{DownOutlined:k,AlignLeftOutlined:O,SearchOutlined:D,FormOutlined:T,CreateDrawer:S},setup(){const e=c(null),a=c(),t=m(),l=K((()=>!r.treeItemKey.length)),r=h({addMenuOptions:[{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:l}],loading:!0,subLoading:!1,isEditMenu:!1,treeData:[],treeItemKey:[],treeItemTitle:"",expandedKeys:[],formParams:{},pattern:"",drawerTitle:""});return U((()=>{return e=this,a=null,t=function*(){const e=yield d();r.expandedKeys=e.list.map((e=>e.key)),r.treeData=e.list,r.loading=!1},new Promise(((l,r)=>{var n=e=>{try{s(t.next(e))}catch(a){r(a)}},o=e=>{try{s(t.throw(e))}catch(a){r(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,o);s((t=t.apply(e,a)).next())}));var e,a,t})),u(s({},b(r)),{createDrawerRef:a,formRef:e,rules:L,selectedTree:function(e){if(e.length){const a=i(j(r.treeData),e[0]);r.treeItemKey=e,r.treeItemTitle=a.label,r.formParams=Object.assign(r.formParams,a),r.isEditMenu=!0}else r.isEditMenu=!1,r.treeItemKey=[],r.treeItemTitle=""},handleReset:function(){const e=i(j(r.treeData),r.treeItemKey[0]);r.formParams=Object.assign(r.formParams,e)},formSubmit:function(){e.value.validate((e=>{e?t.error("请填写完整信息"):t.error("抱歉，您没有该权限")}))},packHandle:function(){r.expandedKeys.length?r.expandedKeys=[]:r.expandedKeys=r.treeData.map((e=>e.key))},onExpandedKeys:function(e){},selectAddMenu:function(e){r.drawerTitle="home"===e?"添加顶栏菜单":`添加子菜单：${r.treeItemTitle}`,function(){const{openDrawer:e}=a.value;e()}()}})}});const A={class:"n-layout-page-header"},V=x(" 页面数据为 Mock 示例数据，非真实数据。 "),$=x(" 添加菜单 "),F={class:"flex items-center"},H={class:"flex items-center"},X={class:"w-full menu"},N={class:"py-3 menu-list"},W={key:0,class:"flex items-center justify-center py-4"},Z=x(" 从菜单列表选择一项后，进行编辑 "),B=x("当前窗口"),G=x("新窗口"),J=x("保存修改"),Q=x("重置");q.render=function(e,a,t,l,r,n){const o=y("n-card"),s=y("DownOutlined"),u=y("n-icon"),d=y("n-button"),i=y("n-dropdown"),p=y("AlignLeftOutlined"),f=y("n-space"),m=y("SearchOutlined"),c=y("n-input"),h=y("n-spin"),b=y("n-tree"),k=y("n-gi"),O=y("FormOutlined"),D=y("n-alert"),T=y("n-form-item"),K=y("n-radio"),U=y("n-radio-group"),j=y("n-form"),I=y("n-grid"),S=y("CreateDrawer");return v(),g("div",null,[P("div",A,[P(o,{bordered:!1,title:"菜单权限管理"},{default:_((()=>[V])),_:1})]),P(I,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:_((()=>[P(k,{span:"1"},{default:_((()=>[P(o,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:_((()=>[P(f,null,{default:_((()=>[P(i,{trigger:"hover",onSelect:e.selectAddMenu,options:e.addMenuOptions},{default:_((()=>[P(d,{type:"info",ghost:"","icon-placement":"right"},{icon:_((()=>[P("div",F,[P(u,{size:"14"},{default:_((()=>[P(s)])),_:1})])])),default:_((()=>[$])),_:1})])),_:1},8,["onSelect","options"]),P(d,{type:"info",ghost:"","icon-placement":"left",onClick:e.packHandle},{icon:_((()=>[P("div",H,[P(u,{size:"14"},{default:_((()=>[P(p)])),_:1})])])),default:_((()=>[x(" 全部"+w(e.expandedKeys.length?"收起":"展开")+" ",1)])),_:1},8,["onClick"])])),_:1})])),default:_((()=>[P("div",X,[P(c,{type:"input",value:e.pattern,"onUpdate:value":a[1]||(a[1]=a=>e.pattern=a),placeholder:"输入菜单名称搜索"},{suffix:_((()=>[P(u,{size:"18",class:"cursor-pointer"},{default:_((()=>[P(m)])),_:1})])),_:1},8,["value"]),P("div",N,[e.loading?(v(),g("div",W,[P(h,{size:"medium"})])):(v(),g(b,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:e.pattern,data:e.treeData,expandedKeys:e.expandedKeys,style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":e.selectedTree},null,8,["pattern","data","expandedKeys","onUpdate:selectedKeys"]))])])])),_:1})])),_:1}),P(k,{span:"2"},{default:_((()=>[P(o,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:_((()=>[P(f,null,{default:_((()=>[P(u,{size:"18"},{default:_((()=>[P(O)])),_:1}),P("span",null,"编辑菜单"+w(e.treeItemTitle?`：${e.treeItemTitle}`:""),1)])),_:1})])),default:_((()=>[P(D,{type:"info",closable:""},{default:_((()=>[Z])),_:1}),e.isEditMenu?(v(),g(j,{key:0,model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":100,class:"py-4"},{default:_((()=>[P(T,{label:"类型",path:"type"},{default:_((()=>[P("span",null,w(1===e.formParams.type?"侧边栏菜单":""),1)])),_:1}),P(T,{label:"标题",path:"label"},{default:_((()=>[P(c,{placeholder:"请输入标题",value:e.formParams.label,"onUpdate:value":a[2]||(a[2]=a=>e.formParams.label=a)},null,8,["value"])])),_:1}),P(T,{label:"副标题",path:"subtitle"},{default:_((()=>[P(c,{placeholder:"请输入副标题",value:e.formParams.subtitle,"onUpdate:value":a[3]||(a[3]=a=>e.formParams.subtitle=a)},null,8,["value"])])),_:1}),P(T,{label:"路径",path:"path"},{default:_((()=>[P(c,{placeholder:"请输入路径",value:e.formParams.path,"onUpdate:value":a[4]||(a[4]=a=>e.formParams.path=a)},null,8,["value"])])),_:1}),P(T,{label:"打开方式",path:"openType"},{default:_((()=>[P(U,{value:e.formParams.openType,"onUpdate:value":a[5]||(a[5]=a=>e.formParams.openType=a),name:"openType"},{default:_((()=>[P(f,null,{default:_((()=>[P(K,{value:1},{default:_((()=>[B])),_:1}),P(K,{value:2},{default:_((()=>[G])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),P(T,{label:"菜单权限",path:"auth"},{default:_((()=>[P(c,{placeholder:"请输入权限，多个权限用，分割",value:e.formParams.auth,"onUpdate:value":a[6]||(a[6]=a=>e.formParams.auth=a)},null,8,["value"])])),_:1}),P(T,{path:"auth",style:{"margin-left":"100px"}},{default:_((()=>[P(f,null,{default:_((()=>[P(d,{type:"primary",loading:e.subLoading,onClick:e.formSubmit},{default:_((()=>[J])),_:1},8,["loading","onClick"]),P(d,{onClick:e.handleReset},{default:_((()=>[Q])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"])):C("",!0)])),_:1})])),_:1})])),_:1}),P(S,{ref:"createDrawerRef",title:e.drawerTitle},null,8,["title"])])};export default q;
