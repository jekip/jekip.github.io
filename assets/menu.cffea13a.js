var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&o(e,t,a[t]);return e},u=(e,l)=>a(e,t(l));import{h as d,j as i}from"./index.8edf795a.js";import{d as p,Y as m,f,j as c,i as h,R as b,o as y,c as v,_ as g,b as _,t as P,be as w,bs as x,bT as k,bU as T,bV as D,k as O,g as K,y as U,V as j}from"./vendor.ea668100.js";const C={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}};var I=p({name:"CreateDrawer",components:{},props:{title:{type:String,default:"添加顶级菜单"},width:{type:Number,default:450}},setup(){const e=m(),a=f(null),t=c({isDrawer:!1,subLoading:!1,formParams:{label:"",type:1,subtitle:"",openType:1,auth:"",path:"",hidden:!1},placement:"right",alertText:"该功能主要实时预览各种布局效果，更多完整配置在 projectSetting.ts 中设置，建议在生产环境关闭该布局预览功能。"});function l(){t.isDrawer=!1}function r(){a.value.restoreValidation(),t.formParams=Object.assign(t.formParams,{label:"",type:1,subtitle:"",openType:1,auth:"",path:"",hidden:!1})}return u(s({},h(t)),{formRef:a,rules:C,formSubmit:function(){a.value.validate((a=>{a?e.error("请填写完整信息"):(e.success("添加成功"),r(),l())}))},handleReset:r,openDrawer:function(){t.isDrawer=!0},closeDrawer:l})}});const R=w("当前窗口"),S=w("新窗口"),M=w("提交"),z=w("重置");I.render=function(e,a,t,l,r,n){const o=b("n-form-item"),s=b("n-input"),u=b("n-radio"),d=b("n-space"),i=b("n-radio-group"),p=b("n-switch"),m=b("n-form"),f=b("n-button"),c=b("n-drawer-content"),h=b("n-drawer");return y(),v(h,{show:e.isDrawer,"onUpdate:show":a[7]||(a[7]=a=>e.isDrawer=a),width:e.width,placement:e.placement},{default:g((()=>[_(c,{title:e.title,closable:""},{footer:g((()=>[_(d,null,{default:g((()=>[_(f,{type:"primary",loading:e.subLoading,onClick:e.formSubmit},{default:g((()=>[M])),_:1},8,["loading","onClick"]),_(f,{onClick:e.handleReset},{default:g((()=>[z])),_:1},8,["onClick"])])),_:1})])),default:g((()=>[_(m,{model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":100},{default:g((()=>[_(o,{label:"类型",path:"type"},{default:g((()=>[_("span",null,P(1===e.formParams.type?"侧边栏菜单":""),1)])),_:1}),_(o,{label:"标题",path:"label"},{default:g((()=>[_(s,{placeholder:"请输入标题",value:e.formParams.label,"onUpdate:value":a[1]||(a[1]=a=>e.formParams.label=a)},null,8,["value"])])),_:1}),_(o,{label:"副标题",path:"subtitle"},{default:g((()=>[_(s,{placeholder:"请输入副标题",value:e.formParams.subtitle,"onUpdate:value":a[2]||(a[2]=a=>e.formParams.subtitle=a)},null,8,["value"])])),_:1}),_(o,{label:"路径",path:"path"},{default:g((()=>[_(s,{placeholder:"请输入路径",value:e.formParams.path,"onUpdate:value":a[3]||(a[3]=a=>e.formParams.path=a)},null,8,["value"])])),_:1}),_(o,{label:"打开方式",path:"openType"},{default:g((()=>[_(i,{value:e.formParams.openType,"onUpdate:value":a[4]||(a[4]=a=>e.formParams.openType=a),name:"openType"},{default:g((()=>[_(d,null,{default:g((()=>[_(u,{value:1},{default:g((()=>[R])),_:1}),_(u,{value:2},{default:g((()=>[S])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),_(o,{label:"菜单权限",path:"auth"},{default:g((()=>[_(s,{placeholder:"请输入权限，多个权限用，分割",value:e.formParams.auth,"onUpdate:value":a[5]||(a[5]=a=>e.formParams.auth=a)},null,8,["value"])])),_:1}),_(o,{label:"隐藏侧边栏",path:"hidden"},{default:g((()=>[_(p,{value:e.formParams.hidden,"onUpdate:value":a[6]||(a[6]=a=>e.formParams.hidden=a)},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title"])])),_:1},8,["show","width","placement"])};const E={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}};var L=p({components:{DownOutlined:x,AlignLeftOutlined:k,SearchOutlined:T,FormOutlined:D,CreateDrawer:I},setup(){const e=f(null),a=f(),t=m(),l=O((()=>!r.treeItemKey.length)),r=c({addMenuOptions:[{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:l}],loading:!0,subLoading:!1,isEditMenu:!1,treeData:[],treeItemKey:[],treeItemTitle:"",expandedKeys:[],formParams:{},pattern:"",drawerTitle:""});return K((()=>{return e=this,a=null,t=function*(){const e=yield d();r.expandedKeys=e.list.map((e=>e.key)),r.treeData=e.list,r.loading=!1},new Promise(((l,r)=>{var n=e=>{try{s(t.next(e))}catch(a){r(a)}},o=e=>{try{s(t.throw(e))}catch(a){r(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,o);s((t=t.apply(e,a)).next())}));var e,a,t})),u(s({},h(r)),{createDrawerRef:a,formRef:e,rules:E,selectedTree:function(e){if(e.length){const a=i(U(r.treeData),e[0]);r.treeItemKey=e,r.treeItemTitle=a.label,r.formParams=Object.assign(r.formParams,a),r.isEditMenu=!0}else r.isEditMenu=!1,r.treeItemKey=[],r.treeItemTitle=""},handleReset:function(){const e=i(U(r.treeData),r.treeItemKey[0]);r.formParams=Object.assign(r.formParams,e)},formSubmit:function(){e.value.validate((e=>{e?t.error("请填写完整信息"):t.error("抱歉，您没有该权限")}))},packHandle:function(){r.expandedKeys.length?r.expandedKeys=[]:r.expandedKeys=r.treeData.map((e=>e.key))},onExpandedKeys:function(){},selectAddMenu:function(e){r.drawerTitle="home"===e?"添加顶栏菜单":`添加子菜单：${r.treeItemTitle}`,function(){const{openDrawer:e}=a.value;e()}()}})}});const q={class:"n-layout-page-header"},A=w(" 页面数据为 Mock 示例数据，非真实数据。 "),V=w(" 添加菜单 "),F={class:"flex items-center"},H={class:"flex items-center"},$={class:"w-full menu"},N={class:"py-3 menu-list"},Y={key:0,class:"flex items-center justify-center py-4"},B=w(" 从菜单列表选择一项后，进行编辑 "),G=w("当前窗口"),J=w("新窗口"),Q=w("保存修改"),W=w("重置");L.render=function(e,a,t,l,r,n){const o=b("n-card"),s=b("DownOutlined"),u=b("n-icon"),d=b("n-button"),i=b("n-dropdown"),p=b("AlignLeftOutlined"),m=b("n-space"),f=b("SearchOutlined"),c=b("n-input"),h=b("n-spin"),x=b("n-tree"),k=b("n-gi"),T=b("FormOutlined"),D=b("n-alert"),O=b("n-form-item"),K=b("n-radio"),U=b("n-radio-group"),C=b("n-form"),I=b("n-grid"),R=b("CreateDrawer");return y(),v("div",null,[_("div",q,[_(o,{bordered:!1,title:"菜单权限管理"},{default:g((()=>[A])),_:1})]),_(I,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:g((()=>[_(k,{span:"1"},{default:g((()=>[_(o,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:g((()=>[_(m,null,{default:g((()=>[_(i,{trigger:"hover",onSelect:e.selectAddMenu,options:e.addMenuOptions},{default:g((()=>[_(d,{type:"info",ghost:"","icon-placement":"right"},{icon:g((()=>[_("div",F,[_(u,{size:"14"},{default:g((()=>[_(s)])),_:1})])])),default:g((()=>[V])),_:1})])),_:1},8,["onSelect","options"]),_(d,{type:"info",ghost:"","icon-placement":"left",onClick:e.packHandle},{icon:g((()=>[_("div",H,[_(u,{size:"14"},{default:g((()=>[_(p)])),_:1})])])),default:g((()=>[w(" 全部"+P(e.expandedKeys.length?"收起":"展开")+" ",1)])),_:1},8,["onClick"])])),_:1})])),default:g((()=>[_("div",$,[_(c,{type:"input",value:e.pattern,"onUpdate:value":a[1]||(a[1]=a=>e.pattern=a),placeholder:"输入菜单名称搜索"},{suffix:g((()=>[_(u,{size:"18",class:"cursor-pointer"},{default:g((()=>[_(f)])),_:1})])),_:1},8,["value"]),_("div",N,[e.loading?(y(),v("div",Y,[_(h,{size:"medium"})])):(y(),v(x,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:e.pattern,data:e.treeData,expandedKeys:e.expandedKeys,style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":e.selectedTree},null,8,["pattern","data","expandedKeys","onUpdate:selectedKeys"]))])])])),_:1})])),_:1}),_(k,{span:"2"},{default:g((()=>[_(o,{segmented:{content:"hard"},bordered:!1,size:"small"},{header:g((()=>[_(m,null,{default:g((()=>[_(u,{size:"18"},{default:g((()=>[_(T)])),_:1}),_("span",null,"编辑菜单"+P(e.treeItemTitle?`：${e.treeItemTitle}`:""),1)])),_:1})])),default:g((()=>[_(D,{type:"info",closable:""},{default:g((()=>[B])),_:1}),e.isEditMenu?(y(),v(C,{key:0,model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":100,class:"py-4"},{default:g((()=>[_(O,{label:"类型",path:"type"},{default:g((()=>[_("span",null,P(1===e.formParams.type?"侧边栏菜单":""),1)])),_:1}),_(O,{label:"标题",path:"label"},{default:g((()=>[_(c,{placeholder:"请输入标题",value:e.formParams.label,"onUpdate:value":a[2]||(a[2]=a=>e.formParams.label=a)},null,8,["value"])])),_:1}),_(O,{label:"副标题",path:"subtitle"},{default:g((()=>[_(c,{placeholder:"请输入副标题",value:e.formParams.subtitle,"onUpdate:value":a[3]||(a[3]=a=>e.formParams.subtitle=a)},null,8,["value"])])),_:1}),_(O,{label:"路径",path:"path"},{default:g((()=>[_(c,{placeholder:"请输入路径",value:e.formParams.path,"onUpdate:value":a[4]||(a[4]=a=>e.formParams.path=a)},null,8,["value"])])),_:1}),_(O,{label:"打开方式",path:"openType"},{default:g((()=>[_(U,{value:e.formParams.openType,"onUpdate:value":a[5]||(a[5]=a=>e.formParams.openType=a),name:"openType"},{default:g((()=>[_(m,null,{default:g((()=>[_(K,{value:1},{default:g((()=>[G])),_:1}),_(K,{value:2},{default:g((()=>[J])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),_(O,{label:"菜单权限",path:"auth"},{default:g((()=>[_(c,{placeholder:"请输入权限，多个权限用，分割",value:e.formParams.auth,"onUpdate:value":a[6]||(a[6]=a=>e.formParams.auth=a)},null,8,["value"])])),_:1}),_(O,{path:"auth",style:{"margin-left":"100px"}},{default:g((()=>[_(m,null,{default:g((()=>[_(d,{type:"primary",loading:e.subLoading,onClick:e.formSubmit},{default:g((()=>[Q])),_:1},8,["loading","onClick"]),_(d,{onClick:e.handleReset},{default:g((()=>[W])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"])):j("",!0)])),_:1})])),_:1})])),_:1}),_(R,{ref:"createDrawerRef",title:e.drawerTitle},null,8,["title"])])};export default L;
