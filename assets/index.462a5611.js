var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(o,t,l)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,r=(e,o)=>{for(var t in o||(o={}))n.call(o,t)&&s(e,t,o[t]);if(l)for(var t of l(o))a.call(o,t)&&s(e,t,o[t]);return e},i=(e,l)=>o(e,t(l)),u=(e,o,t)=>new Promise(((l,n)=>{var a=e=>{try{r(t.next(e))}catch(o){n(o)}},s=e=>{try{r(t.throw(e))}catch(o){n(o)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,s);r((t=t.apply(e,o)).next())}));import{b2 as d,d as c,f as p,j as f,k as m,x as b,i as g,bt as h,bD as M,X as v,o as y,c as P,bB as k,a4 as w,b as R,bh as C,t as O,a5 as S,bw as _,h as B,bo as I,_ as L}from"./vendor.753c6347.js";import{k as j,l as x,m as N}from"./index.c7a2ed8c.js";import{_ as U}from"./BasicForm.5f641f41.js";import{u as V}from"./useForm.18b8c057.js";import"./propTypes.34968b9b.js";const D=i(r({},d.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),F=function(e,o){var t;return e.currentStyle?e.currentStyle[o]:null==(t=document.defaultView)?void 0:t.getComputedStyle(e,null)[o]},T={left:0,top:0,currentX:0,currentY:0,flag:!1};var X=c({name:"BasicModal",components:{},props:r({},D),emits:["on-close","on-ok","register"],setup(e,{emit:o,attrs:t}){const l=p({}),n=f({isModal:!1,subLoading:!1}),a=m((()=>{const o=r(r({},e),b(l));return r({},o)}));function s(e){return u(this,null,(function*(){l.value=j(b(l)||{},e)}))}const d=m((()=>r(r({},t),b(a))));function c(){n.isModal=!0,h((()=>{const e=document.getElementById("basic-modal");!function(e,o,t){const l=document.body.clientWidth,n=document.documentElement.clientHeight,a=o.offsetWidth,s=o.offsetHeight,r=o.offsetLeft,i=o.offsetTop,u=l-r-a,d=n-i-s;"auto"!==F(o,"left")&&(T.left=F(o,"left")),"auto"!==F(o,"top")&&(T.top=F(o,"top")),e.onmousedown=function(o){T.flag=!0,o||(o=window.event,e.onselectstart=function(){return!1});const t=o;T.currentX=t.clientX,T.currentY=t.clientY},document.onmouseup=function(){T.flag=!1,"auto"!==F(o,"left")&&(T.left=F(o,"left")),"auto"!==F(o,"top")&&(T.top=F(o,"top"))},document.onmousemove=function(e){const l=e||window.event;if(T.flag){const n=l.clientX,a=l.clientY,s=n-T.currentX,c=a-T.currentY;let p=parseInt(T.left)+s,f=parseInt(T.top)+c;return-p>r?p=-r:p>u&&(p=u),-f>i?f=-i:f>d&&(f=d),o.style.left=p+"px",o.style.top=f+"px","function"==typeof t&&t((parseInt(T.left)||0)+s,(parseInt(T.top)||0)+c),e.preventDefault&&e.preventDefault(),!1}}}(document.getElementById("basic-modal-bar"),e)}))}function v(){n.isModal=!1,n.subLoading=!1,o("on-close")}const y={setProps:s,openModal:c,closeModal:v,setSubLoading:function(e){n.subLoading=e}};return M()&&o("register",y),i(r({},g(n)),{getBindValue:d,openModal:c,closeModal:v,onCloseModal:function(){n.isModal=!1,o("on-close")},handleSubmit:function(){n.subLoading=!0,o("on-ok")},setProps:s})}});const E={class:"w-full cursor-move",id:"basic-modal-bar"},Y=C("取消");function W(e){const o=p(null),t=p(!1);const l=()=>{const e=b(o);return e};return[function(l){if(!M())throw new Error("useModal() can only be used inside setup() or functional components!");B((()=>{o.value=null,t.value=!1})),b(t)&&x()&&l===b(o)||(o.value=l,I((()=>e),(()=>{const{setProps:t}=o.value;e&&t(N(e))}),{immediate:!0,deep:!0}))},{setProps:e=>{var o;null==(o=l())||o.setProps(e)},openModal:()=>{var e;null==(e=l())||e.openModal()},closeModal:()=>{var e;null==(e=l())||e.closeModal()},setSubLoading:e=>{var o;null==(o=l())||o.setSubLoading(e)}}]}X.render=function(e,o,t,l,n,a){const s=v("n-button"),r=v("n-space"),i=v("n-modal");return y(),P(i,_({id:"basic-modal"},e.getBindValue,{show:e.isModal,"onUpdate:show":o[1]||(o[1]=o=>e.isModal=o),onClose:e.onCloseModal}),k({header:w((()=>[R("div",E,O(e.getBindValue.title),1)])),default:w((()=>[S(e.$slots,"default")])),_:2},[e.$slots.action?{name:"action",fn:w((()=>[S(e.$slots,"action")]))}:{name:"action",fn:w((()=>[R(r,null,{default:w((()=>[R(s,{onClick:e.closeModal},{default:w((()=>[Y])),_:1},8,["onClick"]),R(s,{type:"primary",loading:e.subLoading,onClick:e.handleSubmit},{default:w((()=>[C(O(e.subBtuText),1)])),_:1},8,["loading","onClick"])])),_:1})]))}]),1040,["show","onClose"])};const $=[{field:"name",component:"NInput",label:"姓名",labelMessage:"这是一个提示",giProps:{span:1},componentProps:{placeholder:"请输入姓名",onInput:e=>{}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:e=>{}}},{field:"type",component:"NSelect",label:"类型",giProps:{},componentProps:{placeholder:"请选择类型",options:[{label:"舒适性",value:1},{label:"经济性",value:2}],onUpdateValue:e=>{}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",giProps:{},componentProps:{type:"date",clearable:!0,defaultValue:118313526e4,onUpdateValue:e=>{}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",giProps:{},componentProps:{clearable:!0,onUpdateValue:e=>{}}},{field:"makeProject",component:"NCheckbox",label:"预约项目",giProps:{},componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:e=>{}}},{field:"makeSource",component:"NRadioGroup",label:"来源",giProps:{},componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:e=>{}}},{field:"status",label:"状态",giProps:{},slot:"statusSlot"}];var G=c({components:{basicModal:X,BasicForm:U},setup(){const e=p(null),o=L(),[t,{openModal:l,closeModal:n,setSubLoading:a}]=W({title:"新增预约"}),[s,{openModal:d,closeModal:c,setSubLoading:m}]=W({title:"确认对话框",showIcon:!0,type:"warning",closable:!1,maskClosable:!0}),[b,{submit:h}]=V({gridProps:{cols:1},collapsedRows:3,labelWidth:120,layout:"horizontal",submitButtonText:"提交预约",showActionButtonGroup:!1,schemas:$}),M=f({formValue:{name:"小马哥"}});return i(r({},g(M)),{modalRef:e,register:b,modalRegister:t,lightModalRegister:s,handleReset:function(e){},showModal:function(){l()},okModal:function(){return u(this,null,(function*(){(yield h())?(n(),o.success("提交成功")):(o.error("验证失败，请填写完整信息"),a(!1))}))},lightOkModal:function(){c(),m()},showLightModal:function(){d()}})}});const H={class:"n-layout-page-header"},q=C(" 模态框，用于向用户收集或展示信息，Modal 采用 Dialog 预设，扩展拖拽效果 "),z=R("br",null,null,-1),A=C(" 以下是 useModal 方式，ref方式，也支持，使用方式和其他组件一致，如：modalRef.value.closeModal() "),J=C(" 使用 useModal 进行弹窗展示和操作，并演示了在Modal内和Form组件，组合使用方法 "),K=C("打开Modal嵌套Form例子"),Q=C(" 使用 useModal 进行弹窗展示和操作，自定义配置，实现轻量级效果，更多配置，请参考文档 "),Z=C("轻量级确认"),ee=C(" 组件暴露了，setProps 方法，用于修改组件内部 Props，比如标题，等，具体参考UI框架文档，DialogReactive Properties "),oe=R("p",{class:"text-gray-500",style:{"padding-left":"35px"}},"一些对话框内容",-1);G.render=function(e,o,t,l,n,a){const s=v("n-card"),r=v("n-alert"),i=v("n-divider"),u=v("n-button"),d=v("n-space"),c=v("n-input"),p=v("BasicForm"),f=v("basicModal");return y(),P("div",null,[R("div",H,[R(s,{bordered:!1,title:"模态框"},{default:w((()=>[q,z,A])),_:1})]),R(s,{bordered:!1,class:"proCard mt-4"},{default:w((()=>[R(r,{title:"Modal嵌套Form",type:"info"},{default:w((()=>[J])),_:1}),R(i),R(d,null,{default:w((()=>[R(u,{type:"primary",onClick:e.showModal},{default:w((()=>[K])),_:1},8,["onClick"])])),_:1}),R(i),R(r,{title:"个性化轻量级",type:"info"},{default:w((()=>[Q])),_:1}),R(i),R(d,null,{default:w((()=>[R(u,{type:"primary",onClick:e.showLightModal},{default:w((()=>[Z])),_:1},8,["onClick"])])),_:1}),R(i),R(r,{title:"提示",type:"info"},{default:w((()=>[ee])),_:1})])),_:1}),R(f,{onRegister:e.modalRegister,ref:"modalRef",class:"basicModal",onOnOk:e.okModal},{default:w((()=>[R(p,{onRegister:e.register,onReset:e.handleReset,class:"basicForm"},{statusSlot:w((({model:e,field:o})=>[R(c,{value:e[o],"onUpdate:value":t=>e[o]=t},null,8,["value","onUpdate:value"])])),_:1},8,["onRegister","onReset"])])),_:1},8,["onRegister","onOnOk"]),R(f,{onRegister:e.lightModalRegister,class:"basicModalLight",ref:"modalRef",onOnOk:e.lightOkModal},{default:w((()=>[oe])),_:1},8,["onRegister","onOnOk"])])};export default G;
