var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,l,o)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o,i=(e,t)=>{for(var l in t||(t={}))n.call(t,l)&&s(e,l,t[l]);if(o)for(var l of o(t))a.call(t,l)&&s(e,l,t[l]);return e},r=(e,t,l)=>new Promise(((o,n)=>{var a=e=>{try{i(l.next(e))}catch(t){n(t)}},s=e=>{try{i(l.throw(e))}catch(t){n(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,s);i((l=l.apply(e,t)).next())}));import{e as u,h as d,d as f,j as c,c as p,k as m}from"./index.c7a2ed8c.js";import{x as b,B as g,bu as v,d as y,bC as h,bF as P,bA as O,f as k,j as S,k as B,bo as F,g as j,X as M,o as _,c as w,b as x,F as V,r as C,bw as N,bB as R,bh as E,t as I,a5 as U,bG as z,Y as T,e as D}from"./vendor.753c6347.js";import{p as G}from"./propTypes.34968b9b.js";function A(e){return"NInput"===e?"请输入":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":""}const $={labelWidth:{type:[Number,String],default:80},schemas:{type:[Array],default:()=>[]},layout:{type:String,default:"inline"},inline:{type:Boolean,default:!1},size:{type:String,default:"medium"},labelPlacement:{type:String,default:"left"},isFull:{type:Boolean,default:!0},showActionButtonGroup:G.bool.def(!0),showResetButton:G.bool.def(!0),resetButtonOptions:Object,showSubmitButton:G.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:G.bool.def(!0),submitButtonText:{type:String,default:"查询"},resetButtonText:{type:String,default:"重置"},gridProps:Object,giProps:Object,baseGridStyle:{type:Object},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}};var Q=y({name:"BasicUpload",components:{DownOutlined:h,UpOutlined:P,QuestionCircleOutlined:O},props:i({},$),emits:["reset","submit","register"],setup(e,{emit:o,attrs:n}){const a=k({}),s=S({}),y=k({}),h=k(null),P=k(null),O=k(!0),M=k(!1),_=k(!1),w=B((()=>Object.assign({size:e.size,type:"primary"},e.submitButtonOptions))),x=B((()=>Object.assign({size:e.size,type:"default"},e.resetButtonOptions)));const V=B((()=>{const t=i(i({},e),b(y)),l={rules:{}};return(t.schemas||[]).forEach((e=>{e.rules&&f(e.rules)&&(l.rules[e.field]=e.rules)})),i(i({},t),b(l))})),C=B((()=>{const{layout:e}=b(V);return"inline"===e})),N=B((()=>{const{gridProps:e}=b(V);return o=i({},e),n={collapsed:!!C.value&&O.value},t(o,l(n));var o,n})),R=B((()=>i(i(i({},n),e),b(V)))),E=B((()=>{const e=b(h)||b(V).schemas;for(const t of e){const{defaultValue:e}=t;e&&(t.defaultValue=e)}return e})),{handleFormValues:I,initDefault:U}=function({defaultFormModel:e,getSchema:t,formModel:l}){return{handleFormValues:function(e){if(!d(e))return{};const t={};for(const l of Object.entries(e)){let[,e]=l;const[o]=l;!o||f(e)&&0===e.length||u(e)||c(e)||(p(e)&&(e=e.trim()),v(t,o,e))}return t},initDefault:function(){const o=b(t),n={};o.forEach((e=>{const{defaultValue:t}=e;c(t)||(n[e.field]=t,l[e.field]=t)})),e.value=n}}}({getProps:V,defaultFormModel:a,getSchema:E,formModel:s}),{handleSubmit:z,validate:T,resetFields:D,getFieldsValue:G,clearValidate:$,setFieldsValue:Q}=function({emit:e,getProps:t,formModel:l,getSchema:o,formElRef:n,defaultFormModel:a,loadingSub:s,handleFormValues:i}){function d(){return r(this,null,(function*(){var e;return null==(e=b(n))?void 0:e.validate()}))}function f(o){return r(this,null,(function*(){o&&o.preventDefault(),s.value=!0;const{submitFunc:a}=b(t);if(a&&u(a))yield a();else if(b(n))try{return yield d(),s.value=!1,e("submit",l),!0}catch(i){return s.value=!1,!1}}))}function c(){return r(this,null,(function*(){var e;yield null==(e=b(n))?void 0:e.restoreValidation()}))}return{handleSubmit:f,validate:d,resetFields:function(){return r(this,null,(function*(){const{resetFunc:o,submitOnReset:s}=b(t);if(o&&u(o)&&(yield o()),!b(n))return;Object.keys(l).forEach((e=>{l[e]=b(a)[e]||null})),yield c();const r=i(g(b(l)));e("reset",r),s&&(yield f())}))},getFieldsValue:function(){return b(n)?i(g(b(l))):{}},clearValidate:c,setFieldsValue:function(e){return r(this,null,(function*(){const t=b(o).map((e=>e.field)).filter(Boolean);Object.keys(e).forEach((o=>{const n=e[o];t.includes(o)&&(l[o]=n)}))}))}}}({emit:o,getProps:V,formModel:s,getSchema:E,formElRef:P,defaultFormModel:a,loadingSub:M,handleFormValues:I});const W={getFieldsValue:G,setFieldsValue:Q,resetFields:D,validate:T,clearValidate:$,setProps:function(e){return r(this,null,(function*(){y.value=m(b(y)||{},e)}))},submit:z};return F((()=>E.value),(e=>{b(_)||(null==e?void 0:e.length)&&(U(),_.value=!0)})),j((()=>{U(),o("register",W)})),{formElRef:P,formModel:s,getGrid:N,getProps:V,getBindValue:R,getSchema:E,getSubmitBtnOptions:w,getResetBtnOptions:x,handleSubmit:z,resetFields:D,loadingSub:M,isInline:C,getComponentProps:function(e){var t;const l=null!=(t=e.componentProps)?t:{},o=e.component;return i({clearable:!0,placeholder:A(b(o))},l)},unfoldToggle:function(){O.value=!O.value}}}});const W=D(),X=W(((e,t,l,o,n,a)=>{const s=M("QuestionCircleOutlined"),i=M("n-icon"),r=M("n-tooltip"),u=M("n-checkbox"),d=M("n-space"),f=M("n-checkbox-group"),c=M("n-radio"),p=M("n-radio-group"),m=M("n-form-item"),b=M("n-gi"),g=M("n-button"),v=M("DownOutlined"),y=M("UpOutlined"),h=M("n-grid"),P=M("n-form");return _(),w(P,N(e.getBindValue,{model:e.formModel,ref:"formElRef"}),{default:W((()=>[x(h,e.getGrid,{default:W((()=>[(_(!0),w(V,null,C(e.getSchema,(t=>(_(),w(b,N(t.giProps,{key:t.field}),{default:W((()=>[x(m,{label:t.label,path:t.field},R({default:W((()=>[t.slot?U(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):"NCheckbox"===t.component?(_(),w(f,{key:1,value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l},{default:W((()=>[x(d,null,{default:W((()=>[(_(!0),w(V,null,C(t.componentProps.options,(e=>(_(),w(u,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1024)])),_:2},1032,["value","onUpdate:value"])):"NRadioGroup"===t.component?(_(),w(p,{key:2,value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l},{default:W((()=>[x(d,null,{default:W((()=>[(_(!0),w(V,null,C(t.componentProps.options,(e=>(_(),w(c,{key:e.value,value:e.value},{default:W((()=>[E(I(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1024)])),_:2},1032,["value","onUpdate:value"])):(_(),w(z(t.component),N({key:3},e.getComponentProps(t),{value:e.formModel[t.field],"onUpdate:value":l=>e.formModel[t.field]=l,class:{isFull:0!=t.isFull&&e.getProps.isFull}}),null,16,["value","onUpdate:value","class"])),t.suffix?U(e.$slots,t.suffix,{key:4,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):T("",!0)])),_:2},[t.labelMessage?{name:"label",fn:W((()=>[E(I(t.label)+" ",1),x(r,{trigger:"hover",style:t.labelMessageStyle},{trigger:W((()=>[x(i,{size:"18",class:"cursor-pointer text-gray-400"},{default:W((()=>[x(s)])),_:1})])),default:W((()=>[E(" "+I(t.labelMessage),1)])),_:2},1032,["style"])]))}:void 0]),1032,["label","path"])])),_:2},1040)))),128)),e.getProps.showActionButtonGroup?(_(),w(b,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:W((({overflow:t})=>[x(d,{align:"center",justify:e.isInline?"end":"start",style:{"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`}},{default:W((()=>{var l;return[e.getProps.showSubmitButton?(_(),w(g,N({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit,loading:e.loadingSub}),{default:W((()=>[E(I(e.getProps.submitButtonText),1)])),_:1},16,["onClick","loading"])):T("",!0),e.getProps.showResetButton?(_(),w(g,N({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:W((()=>[E(I(e.getProps.resetButtonText),1)])),_:1},16,["onClick"])):T("",!0),e.isInline&&e.getSchema.length>((null==(l=e.getProps.gridProps)?void 0:l.cols)||0)&&e.getProps.showAdvancedButton?(_(),w(g,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:W((()=>[t?(_(),w(i,{key:0,size:"14",class:"unfold-icon"},{default:W((()=>[x(v)])),_:1})):(_(),w(i,{key:1,size:"14",class:"unfold-icon"},{default:W((()=>[x(y)])),_:1}))])),default:W((()=>[E(" "+I(t?"展开":"收起"),1)])),_:2},1032,["onClick"])):T("",!0)]})),_:2},1032,["justify","style"])])),_:1},8,["span","suffix"])):T("",!0)])),_:1},16)])),_:1},16,["model"])}));Q.render=X,Q.__scopeId="data-v-264fcdee";export{Q as _};
