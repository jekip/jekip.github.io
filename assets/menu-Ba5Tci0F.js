import{g as ee,c as z}from"./index--2wEcaVU.js";import{_ as te}from"./CreateDrawer.vue_vue_type_script_setup_true_lang-C02Z5_El.js";import{s as ne,t as le,u as ae,v as oe}from"./vicons-antd-g9a0d-xa.js";import{ah as se,ai as ue,w as ie,L as _e,M as pe,b as re,h as de,a8 as ce,a7 as me,r as fe,q as ve,B as ge,F as ye,d as be,e as he,V as ke,W as xe}from"./naive-ui-zccZ3jep.js";import{k as we,r as o,c as Te,e as Ce,o as De,N,O as k,P as p,a2 as e,a3 as t,j as u,K as i,a4 as B,_ as T,a1 as Me}from"./vue-C3qUmXuJ.js";import"./pinia-DjitYwKU.js";import"./lodash-es-Wid6WkHk.js";import"./vue-quill-DMQesYph.js";import"./vue-router-DVIe63a7.js";import"./vicons-ionicons5-Ctkv33lH.js";const Oe={class:"n-layout-page-header"},Ke={class:"flex items-center"},Ue={class:"flex items-center"},ze={class:"w-full menu"},Ne={class:"py-3 menu-list"},Be={key:0,class:"flex items-center justify-center py-4"},Fe=we({__name:"menu",setup(Ie){const I={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},C=o(null),D=o(),g=se(),j=ue();let y=o([]),r=o([]);const d=o([]),M=o(!0),L=o(!1),x=o(!1),c=o(""),w=o(""),O=o(""),R=Te(()=>!y.value.length),S=o([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:R}]),a=Ce({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function V(l){O.value=l==="home"?"添加顶栏菜单":`添加子菜单：${c.value}`,$()}function $(){const{openDrawer:l}=D.value;l()}function q(l){if(l.length){const n=z(i(d),l[0]);y.value=l,c.value=n.label,Object.assign(a,n),x.value=!0}else x.value=!1,y.value=[],c.value=""}function A(){j.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{g.success("删除成功")},onNegativeClick:()=>{g.error("已取消")}})}function E(){const l=z(i(d),y.value[0]);Object.assign(a,l)}function P(){C.value.validate(l=>{l?g.error("请填写完整信息"):g.error("抱歉，您没有该权限")})}function F(){r.value.length?r.value=[]:r.value=i(d).map(l=>l.key)}De(async()=>{const l=await ee(),n=l.list.map(m=>m.key);Object.assign(a,n),d.value=l.list,M.value=!1});function H(l){r.value=l}return(l,n)=>{const m=ie,b=de,f=ge,W=ve,h=fe,v=re,G=ce,J=me,K=pe,Q=ye,_=he,U=xe,X=ke,Y=be,Z=_e;return k(),N("div",null,[p("div",Oe,[e(m,{bordered:!1,title:"菜单权限管理"},{default:t(()=>n[6]||(n[6]=[u(" 页面数据为 Mock 示例数据，非真实数据。 ",-1)])),_:1,__:[6]})]),e(Z,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:t(()=>[e(K,{span:"1"},{default:t(()=>[e(m,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(h,null,{default:t(()=>[e(W,{trigger:"hover",onSelect:V,options:S.value},{default:t(()=>[e(f,{type:"info",ghost:"","icon-placement":"right"},{icon:t(()=>[p("div",Ke,[e(b,{size:"14"},{default:t(()=>[e(i(le))]),_:1})])]),default:t(()=>[n[7]||(n[7]=u(" 添加菜单 ",-1))]),_:1,__:[7]})]),_:1},8,["options"]),e(f,{type:"info",ghost:"","icon-placement":"left",onClick:F},{icon:t(()=>[p("div",Ue,[e(b,{size:"14"},{default:t(()=>[e(i(ae))]),_:1})])]),default:t(()=>[u(" 全部"+T(i(r).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:t(()=>[p("div",ze,[e(v,{type:"input",value:w.value,"onUpdate:value":n[0]||(n[0]=s=>w.value=s),placeholder:"输入菜单名称搜索"},{suffix:t(()=>[e(b,{size:"18",class:"cursor-pointer"},{default:t(()=>[e(i(ne))]),_:1})]),_:1},8,["value"]),p("div",Ne,[M.value?(k(),N("div",Be,[e(G,{size:"medium"})])):(k(),B(J,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:w.value,data:d.value,expandedKeys:i(r),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":q,"onUpdate:expandedKeys":H},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(K,{span:"2"},{default:t(()=>[e(m,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(h,null,{default:t(()=>[e(b,{size:"18"},{default:t(()=>[e(i(oe))]),_:1}),p("span",null,"编辑菜单"+T(c.value?`：${c.value}`:""),1)]),_:1})]),default:t(()=>[e(Q,{type:"info",closable:""},{default:t(()=>n[8]||(n[8]=[u(" 从菜单列表选择一项后，进行编辑",-1)])),_:1,__:[8]}),x.value?(k(),B(Y,{key:0,model:a,rules:I,ref_key:"formRef",ref:C,"label-placement":"left","label-width":100,class:"py-4"},{default:t(()=>[e(_,{label:"类型",path:"type"},{default:t(()=>[p("span",null,T(a.type===1?"侧边栏菜单":""),1)]),_:1}),e(_,{label:"标题",path:"label"},{default:t(()=>[e(v,{placeholder:"请输入标题",value:a.label,"onUpdate:value":n[1]||(n[1]=s=>a.label=s)},null,8,["value"])]),_:1}),e(_,{label:"副标题",path:"subtitle"},{default:t(()=>[e(v,{placeholder:"请输入副标题",value:a.subtitle,"onUpdate:value":n[2]||(n[2]=s=>a.subtitle=s)},null,8,["value"])]),_:1}),e(_,{label:"路径",path:"path"},{default:t(()=>[e(v,{placeholder:"请输入路径",value:a.path,"onUpdate:value":n[3]||(n[3]=s=>a.path=s)},null,8,["value"])]),_:1}),e(_,{label:"打开方式",path:"openType"},{default:t(()=>[e(X,{value:a.openType,"onUpdate:value":n[4]||(n[4]=s=>a.openType=s),name:"openType"},{default:t(()=>[e(h,null,{default:t(()=>[e(U,{value:1},{default:t(()=>n[9]||(n[9]=[u("当前窗口",-1)])),_:1,__:[9]}),e(U,{value:2},{default:t(()=>n[10]||(n[10]=[u("新窗口",-1)])),_:1,__:[10]})]),_:1})]),_:1},8,["value"])]),_:1}),e(_,{label:"菜单权限",path:"auth"},{default:t(()=>[e(v,{placeholder:"请输入权限，多个权限用，分割",value:a.auth,"onUpdate:value":n[5]||(n[5]=s=>a.auth=s)},null,8,["value"])]),_:1}),e(_,{path:"auth",style:{"margin-left":"100px"}},{default:t(()=>[e(h,null,{default:t(()=>[e(f,{type:"primary",loading:L.value,onClick:P},{default:t(()=>n[11]||(n[11]=[u("保存修改",-1)])),_:1,__:[11]},8,["loading"]),e(f,{onClick:E},{default:t(()=>n[12]||(n[12]=[u("重置",-1)])),_:1,__:[12]}),e(f,{onClick:A},{default:t(()=>n[13]||(n[13]=[u("删除",-1)])),_:1,__:[13]})]),_:1})]),_:1})]),_:1},8,["model"])):Me("",!0)]),_:1})]),_:1})]),_:1}),e(te,{ref_key:"createDrawerRef",ref:D,title:O.value},null,8,["title"])])}}});export{Fe as default};
